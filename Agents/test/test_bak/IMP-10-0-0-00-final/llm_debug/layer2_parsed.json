{
  "type_scenarios": [
    {
      "type_id": 1,
      "check_logic": "Verify that version information exists in both netlist and SPEF files without pattern matching",
      "output_format": "PASS: Version information found in both files | FAIL: Version information missing",
      "example_config": {
        "item_id": "IMP-10-0-0-00",
        "description": "Confirm the netlist/spef version is correct.",
        "file_count": 1,
        "requirements": null
      }
    },
    {
      "type_id": 2,
      "check_logic": "Search for specific version patterns in netlist and SPEF files and verify they match expected values",
      "output_format": "PASS: Found matching version 'Generated on:*2025*' | FAIL: Version mismatch or not found",
      "example_config": {
        "item_id": "IMP-10-0-0-00",
        "description": "Confirm the netlist/spef version is correct.",
        "file_count": 1,
        "requirements": {
          "value": 1,
          "pattern_items": [
            "Generated on:*2025*"
          ]
        }
      }
    },
    {
      "type_id": 3,
      "check_logic": "Search for version patterns with waiver support for known version mismatches or legacy formats",
      "output_format": "PASS: Version matched | WAIVED: Version mismatch waived | FAIL: Unwaived version mismatch",
      "example_config": {
        "item_id": "IMP-10-0-0-00",
        "description": "Confirm the netlist/spef version is correct.",
        "file_count": 1,
        "requirements": {
          "value": 1,
          "pattern_items": [
            "Generated on:*2025*"
          ]
        },
        "waivers": [
          {
            "waiver_id": "W001",
            "reason": "Legacy SPEF format IEEE 1481-1998 approved for this block"
          }
        ]
      }
    },
    {
      "type_id": 4,
      "check_logic": "Boolean check for version presence with waiver support for missing version metadata",
      "output_format": "PASS: Version found | WAIVED: Missing version waived | FAIL: Version missing without waiver",
      "example_config": {
        "item_id": "IMP-10-0-0-00",
        "description": "Confirm the netlist/spef version is correct.",
        "file_count": 1,
        "requirements": null,
        "waivers": [
          {
            "waiver_id": "W002",
            "reason": "Third-party netlist without version metadata"
          }
        ]
      }
    }
  ],
  "check_logic": {
    "parsing_method": "Multi-stage extraction: (1) Parse STA log to extract SPEF and netlist file paths, (2) Parse SPEF header for *VERSION field, (3) Parse netlist header comments for version metadata, (4) Compare extracted versions against expected patterns or compatibility rules",
    "pass_fail_logic": "PASS if version information matches expected patterns in both files OR if mismatches are waived. FAIL if version is missing, malformed, incompatible, or unwaived mismatch exists"
  },
  "parse_logic": {
    "file_type": "Multi-format: STA_Log (tool-specific text), SPEF (IEEE 1481 standard), Netlist_Verilog (Verilog with comments)",
    "parsing_strategy": "Sequential extraction chain: (1) Regex extraction of file paths from STA log (read_spef/read_verilog commands), (2) SPEF header parsing for *VERSION field using IEEE 1481 format, (3) Verilog comment parsing for tool version metadata, (4) Pattern matching against requirements.pattern_items with wildcard support"
  },
  "type_examples": [
    {
      "type_id": 1,
      "use_case": "Quick validation that version metadata exists in both files",
      "behavior": "Returns PASS if *VERSION field exists in SPEF and version comment exists in netlist, regardless of content"
    },
    {
      "type_id": 2,
      "use_case": "Verify specific version requirements like 'Generated on:*2025*' for current year validation",
      "behavior": "Searches for exact pattern matches in both files, fails if pattern not found or version mismatch detected"
    },
    {
      "type_id": 3,
      "use_case": "Production flow with approved exceptions for legacy SPEF formats or third-party netlists",
      "behavior": "Applies pattern matching with waiver lookup, allows documented version mismatches to pass as WAIVED"
    },
    {
      "type_id": 4,
      "use_case": "Validation with waiver for blocks known to have missing version metadata",
      "behavior": "Boolean presence check with waiver support, useful for legacy or external IP integration"
    }
  ],
  "test_scenarios": [
    {
      "type_id": 1,
      "scenario": "PASS",
      "description": "Both SPEF and netlist contain version information",
      "input_data": {
        "sta_log": "read_spef /path/to/design.spef\nread_verilog /path/to/design.v",
        "spef_content": "*SPEF \"IEEE 1481-1999\"\n*DESIGN \"top_module\"",
        "netlist_content": "// Generated by Tool v2.1 on: 2025-01-15\nmodule top_module();"
      },
      "expected_output": {
        "status": "PASS",
        "message": "Version information found in both SPEF and netlist files"
      }
    },
    {
      "type_id": 1,
      "scenario": "FAIL",
      "description": "SPEF missing *VERSION field",
      "input_data": {
        "sta_log": "read_spef /path/to/design.spef\nread_verilog /path/to/design.v",
        "spef_content": "*DESIGN \"top_module\"\n*DATE \"Jan 15 2025\"",
        "netlist_content": "// Generated by Tool v2.1 on: 2025-01-15\nmodule top_module();"
      },
      "expected_output": {
        "status": "FAIL",
        "message": "Version information missing in SPEF file"
      }
    },
    {
      "type_id": 2,
      "scenario": "PASS",
      "description": "Version pattern 'Generated on:*2025*' found in netlist",
      "input_data": {
        "sta_log": "read_verilog /path/to/design.v",
        "netlist_content": "// Generated on: 2025-01-15 14:30:00\nmodule top_module();",
        "requirements": {
          "pattern_items": [
            "Generated on:*2025*"
          ]
        }
      },
      "expected_output": {
        "status": "PASS",
        "message": "Found matching version pattern 'Generated on:*2025*'",
        "matched_line": "// Generated on: 2025-01-15 14:30:00"
      }
    },
    {
      "type_id": 2,
      "scenario": "FAIL",
      "description": "Version pattern not found - wrong year",
      "input_data": {
        "sta_log": "read_verilog /path/to/design.v",
        "netlist_content": "// Generated on: 2024-12-31 23:59:59\nmodule top_module();",
        "requirements": {
          "pattern_items": [
            "Generated on:*2025*"
          ]
        }
      },
      "expected_output": {
        "status": "FAIL",
        "message": "Version pattern 'Generated on:*2025*' not found",
        "found_version": "Generated on: 2024-12-31 23:59:59"
      }
    },
    {
      "type_id": 3,
      "scenario": "PASS",
      "description": "Version matches expected pattern",
      "input_data": {
        "spef_content": "*SPEF \"IEEE 1481-1999\"\n*DESIGN \"top\"",
        "requirements": {
          "pattern_items": [
            "IEEE 1481-1999"
          ]
        }
      },
      "expected_output": {
        "status": "PASS",
        "message": "Version 'IEEE 1481-1999' matches expected pattern"
      }
    },
    {
      "type_id": 3,
      "scenario": "WAIVED",
      "description": "Version mismatch waived for legacy format",
      "input_data": {
        "spef_content": "*SPEF \"IEEE 1481-1998\"\n*DESIGN \"legacy_block\"",
        "requirements": {
          "pattern_items": [
            "IEEE 1481-1999"
          ]
        },
        "waivers": [
          {
            "waiver_id": "W001",
            "pattern": "IEEE 1481-1998",
            "reason": "Legacy SPEF format approved for this block"
          }
        ]
      },
      "expected_output": {
        "status": "WAIVED",
        "message": "Version mismatch waived",
        "waiver_id": "W001",
        "reason": "Legacy SPEF format approved for this block"
      }
    },
    {
      "type_id": 4,
      "scenario": "PASS",
      "description": "Version metadata present in files",
      "input_data": {
        "spef_content": "*SPEF \"IEEE 1481-1999\"",
        "netlist_content": "// Tool version: 3.2.1"
      },
      "expected_output": {
        "status": "PASS",
        "message": "Version information found in both files"
      }
    },
    {
      "type_id": 4,
      "scenario": "WAIVED",
      "description": "Missing version metadata waived for third-party IP",
      "input_data": {
        "netlist_content": "module vendor_ip(); // No version info",
        "waivers": [
          {
            "waiver_id": "W002",
            "reason": "Third-party netlist without version metadata"
          }
        ]
      },
      "expected_output": {
        "status": "WAIVED",
        "message": "Missing version information waived",
        "waiver_id": "W002",
        "reason": "Third-party netlist without version metadata"
      }
    }
  ],
  "class_constants": {
    "found_desc": "Version information verified in netlist and SPEF files",
    "missing_desc": "Version information missing or mismatched in netlist/SPEF files",
    "waived_desc": "Version mismatch or missing version waived",
    "found_reason": "Version pattern '{pattern}' found in {file_type}: {matched_line}",
    "missing_reason": "Version pattern '{pattern}' not found in {file_type}. Expected: {expected}, Found: {actual}",
    "waived_base_reason": "Version issue waived: {waiver_reason}",
    "extra_reason": "Unexpected version format found: {extra_content}",
    "unused_waiver_reason": "Waiver {waiver_id} defined but not applied - version already matches expected pattern"
  },
  "logic_steps": [
    "Parse STA log file to extract SPEF and netlist file paths using regex patterns for read_spef and read_verilog commands",
    "Open and parse SPEF file header to extract *VERSION field value (IEEE 1481 format expected)",
    "Open and parse netlist file header comments to extract version metadata (tool version, generation date)",
    "Compare extracted versions against requirements.pattern_items using wildcard pattern matching",
    "If Type 3/4: Check waiver list for matching patterns and apply waiver logic if version mismatch or missing",
    "Generate final status (PASS/FAIL/WAIVED) with detailed message including matched lines and file references"
  ],
  "skill_reference": {
    "recommended_item": "IMP-10-1-0-00",
    "selection_reason": "Similar multi-file version verification pattern with extraction chain from log files to target files. Both require parsing file paths from logs and validating content in referenced files. The semantic intent of verifying version correctness across multiple file formats aligns with existing implementation patterns.",
    "match_confidence": "medium"
  },
  "type_execution_specs": [
    {
      "type_id": 1,
      "description": "Boolean check for version presence in both netlist and SPEF",
      "pass_condition": "spef_version_exists AND netlist_version_exists",
      "fail_condition": "NOT spef_version_exists OR NOT netlist_version_exists",
      "needs_pattern_search": false,
      "needs_waiver_logic": false,
      "output_format": "PASS: Version information found in both files | FAIL: Version information missing in {missing_file}"
    },
    {
      "type_id": 2,
      "description": "Pattern-based version validation without waiver support",
      "pass_condition": "all(pattern in extracted_versions for pattern in pattern_items)",
      "fail_condition": "any(pattern not in extracted_versions for pattern in pattern_items)",
      "needs_pattern_search": true,
      "needs_waiver_logic": false,
      "output_format": "PASS: Found matching version '{pattern}' | FAIL: Version pattern '{pattern}' not found"
    },
    {
      "type_id": 3,
      "description": "Pattern-based version validation with waiver support",
      "pass_condition": "pattern_matched OR (pattern_mismatched AND waiver_applied)",
      "fail_condition": "pattern_mismatched AND NOT waiver_applied",
      "needs_pattern_search": true,
      "needs_waiver_logic": true,
      "output_format": "PASS: Version matched | WAIVED: {waiver_reason} | FAIL: Unwaived version mismatch"
    },
    {
      "type_id": 4,
      "description": "Boolean version presence check with waiver support",
      "pass_condition": "version_exists OR (NOT version_exists AND waiver_applied)",
      "fail_condition": "NOT version_exists AND NOT waiver_applied",
      "needs_pattern_search": false,
      "needs_waiver_logic": true,
      "output_format": "PASS: Version found | WAIVED: {waiver_reason} | FAIL: Version missing without waiver"
    }
  ]
}