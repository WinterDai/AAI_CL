# IMP-7-0-0-00: Block name (e.g: cdn_hs_phy_data_slice)

## Overview

**Check ID:** IMP-7-0-0-00  
**Description:** Block name (e.g: cdn_hs_phy_data_slice)  
**Category:** Design Information Verification  
**Input Files:** `${CHECKLIST_ROOT}/IP_project_folder/reports/7.0/IMP-7-0-0-00.rpt`

This checker validates that the block name is correctly specified in the Innovus design implementation report. It extracts the block name from the report and verifies that it contains the expected substring pattern (e.g., "cdn_hs_phy_data_slice"). This ensures proper design identification and naming consistency throughout the implementation flow.

---

## Check Logic

### Input Parsing
Parse the implementation report to extract the block name entry and validate it contains the expected naming pattern.

**Key Patterns:**
```python
# Pattern 1: Extract block name from report header
pattern1 = r'^Block name:\s*(.+)$'
# Example: "Block name: CDN_104H_cdn_hs_phy_data_slice_EW"

# Pattern 2: Validate expected block name substring presence
pattern2 = r'cdn_hs_phy_data_slice'
# Example: Should match within "CDN_104H_cdn_hs_phy_data_slice_EW"
```

### Detection Logic
1. Read the implementation report file (IMP-7-0-0-00.rpt)
2. Search for the "Block name:" line using pattern1
3. Extract the full block name value
4. Validate that the extracted block name contains the expected substring pattern
5. Determine PASS/FAIL:
   - PASS: Block name found and contains expected pattern
   - FAIL: Block name not found or doesn't contain expected pattern

---

## Output Behavior (CRITICAL - Determines Type 2/3 Logic!)

**Check Mode:** `existence_check`

Choose ONE mode based on what pattern_items represents:

### Mode 1: `existence_check` - Â≠òÂú®ÊÄßÊ£ÄÊü•
**Use when:** pattern_items are items that SHOULD EXIST in input files

```
pattern_items: ["item_A", "item_B", "item_C"]
Input file contains: item_A, item_B

Result:
  found_items:   item_A, item_B    ‚Üê Pattern found in file
  missing_items: item_C            ‚Üê Pattern NOT found in file

PASS: All pattern_items found in file
FAIL: Some pattern_items not found in file
```

### Mode 2: `status_check` - Áä∂ÊÄÅÊ£ÄÊü•  
**Use when:** pattern_items are items to CHECK STATUS, only output matched items

```
pattern_items: ["port_A", "port_B"]
Input file contains: port_A(fixed), port_B(unfixed), port_C(unfixed)

Result:
  found_items:   port_A            ‚Üê Pattern matched AND status correct
  missing_items: port_B            ‚Üê Pattern matched BUT status wrong
  (port_C not output - not in pattern_items)

PASS: All matched items have correct status
FAIL: Some matched items have wrong status (or pattern not matched)
```

**Selected Mode for this checker:** `existence_check`

**Rationale:** This checker validates that the block name entry exists in the implementation report and contains the expected naming pattern. The pattern_items represent required naming substrings that should be present in the extracted block name.

---

## Output Descriptions (CRITICAL - Code Generator Uses These!)

This section defines the output strings used by `build_complete_output()` in the checker code.

```python
# Item description for this checker
item_desc = "Block name (e.g: cdn_hs_phy_data_slice)"

# PASS case descriptions - Split by Type semantics (API-026)
found_desc_type1_4 = "Block name found in implementation report"
found_desc_type2_3 = "Required block name pattern matched (1/1)"

# PASS reasons - Split by Type semantics
found_reason_type1_4 = "Block name entry found and validated in implementation report"
found_reason_type2_3 = "Required block name pattern matched and validated in report"

# FAIL case descriptions
missing_desc_type1_4 = "Block name not found in implementation report"
missing_desc_type2_3 = "Expected block name pattern not satisfied (0/1 missing)"

# FAIL reasons
missing_reason_type1_4 = "Block name entry not found or invalid in implementation report"
missing_reason_type2_3 = "Expected block name pattern not satisfied or missing from report"

# WAIVED case descriptions
waived_desc = "Block name check waived"
waived_base_reason = "Block name verification waived per design team approval"

# UNUSED waivers
unused_desc = "Unused block name waiver entries"
unused_waiver_reason = "Waiver not matched - no corresponding block name issue found"
```

### INFO01/ERROR01 Display Format

```
INFO01 (Clean/Pass items):
  Format: "Block name: <extracted_name>"
  Example: "Block name: CDN_104H_cdn_hs_phy_data_slice_EW"

ERROR01 (Violation/Fail items):
  Format: "Block name pattern missing: <expected_pattern>"
  Example: "Block name pattern missing: cdn_hs_phy_data_slice"
```

---

## Type 1: Boolean Check

**Configuration (copy to item_data.yaml for testing):**
```yaml
IMP-7-0-0-00:
  description: "Block name (e.g: cdn_hs_phy_data_slice)"
  requirements:
    value: N/A
    pattern_items: []
  input_files:
    - "${CHECKLIST_ROOT}/IP_project_folder/reports/7.0/IMP-7-0-0-00.rpt"
  waivers:
    value: N/A
    waive_items: []
```

**Check Behavior:**
Type 1 performs custom boolean checks (file exists? config valid?).
PASS/FAIL based on checker's own validation logic.

**Sample Output (PASS):**
```
Status: PASS
Reason: Block name entry found and validated in implementation report
INFO01:
  - Block name: CDN_104H_cdn_hs_phy_data_slice_EW
```

**Sample Output (FAIL):**
```
Status: FAIL
Reason: Block name entry not found or invalid in implementation report
ERROR01:
  - Block name pattern missing: cdn_hs_phy_data_slice
```

### Type 1 Variant: waivers.value=0 (Forced PASS Mode)

**Configuration:**
```yaml
IMP-7-0-0-00:
  description: "Block name (e.g: cdn_hs_phy_data_slice)"
  requirements:
    value: N/A
    pattern_items: []
  input_files:
    - "${CHECKLIST_ROOT}/IP_project_folder/reports/7.0/IMP-7-0-0-00.rpt"
  waivers:
    value: 0  # CRITICAL: value=0 triggers forced PASS mode
    waive_items:  # IMPORTANT: Use PLAIN STRING format
      - "Explanation: Block name validation is informational only for this design"
      - "Note: Non-standard block naming convention approved by design team"
```

**Sample Output (PASS with violations):**
```
Status: PASS  # Always PASS when waivers.value=0
Reason: All violations waived as informational
INFO01 ([WAIVED_INFO]):
  - "Explanation: Block name validation is informational only for this design"
INFO02 ([WAIVED_AS_INFO]):
  - Block name pattern missing: cdn_hs_phy_data_slice [WAIVED_AS_INFO]
```

---

## Type 2: Value Check

**Configuration (copy to item_data.yaml for testing):**
```yaml
IMP-7-0-0-00:
  description: "Block name (e.g: cdn_hs_phy_data_slice)"
  requirements:
    value: 1
    pattern_items:
      - "cdn_hs_phy_data_slice"
  input_files:
    - "${CHECKLIST_ROOT}/IP_project_folder/reports/7.0/IMP-7-0-0-00.rpt"
  waivers:
    value: N/A
    waive_items: []
```

üõë CRITICAL RULE for pattern_items:
- If description contains "version": Use VERSION IDENTIFIERS ONLY (e.g., "22.11-s119_1")
- If description contains "filename"/"name": Use COMPLETE FILENAMES (e.g., "design.v")
- If description contains "status": Use STATUS VALUES (e.g., "Loaded", "Skipped")

**Check Behavior:**
Type 2 searches pattern_items in input files.
PASS/FAIL depends on check purpose:
- Violation Check: PASS if found_items empty (no violations)
- Requirement Check: PASS if missing_items empty (all requirements met)

**Sample Output (PASS):**
```
Status: PASS
Reason: Required block name pattern matched and validated in report
INFO01:
  - Block name: CDN_104H_cdn_hs_phy_data_slice_EW
```

**Sample Output (FAIL):**
```
Status: FAIL
Reason: Expected block name pattern not satisfied or missing from report
ERROR01:
  - Block name pattern missing: cdn_hs_phy_data_slice
```

### Type 2 Variant: waivers.value=0 (Forced PASS Mode)

**Configuration:**
```yaml
IMP-7-0-0-00:
  description: "Block name (e.g: cdn_hs_phy_data_slice)"
  requirements:
    value: 0
    pattern_items:
      - "cdn_hs_phy_data_slice"
  input_files:
    - "${CHECKLIST_ROOT}/IP_project_folder/reports/7.0/IMP-7-0-0-00.rpt"
  waivers:
    value: 0  # CRITICAL: value=0 triggers forced PASS mode
    waive_items:  # IMPORTANT: Use PLAIN STRING format
      - "Explanation: Block name pattern check is informational only"
      - "Note: Alternative naming convention approved for this project"
```

**CRITICAL Behavior (waivers.value=0):**
- NOTE: Type 2 has NO waiver logic. waive=0 is forced PASS mode only
- IMPORTANT: waive_items uses PLAIN STRINGS (NOT name/reason dict like Type 3/4!)
- waive_items serves as COMMENT ONLY (no matching/filtering logic)
- waive_items content printed as INFO with [WAIVED_INFO] tag
- ALL errors/mismatches force converted: ERROR‚ÜíPASS, displayed as INFO with [WAIVED_AS_INFO] tag
- Check ALWAYS returns PASS (errors shown as INFO for tracking)
- Used when: Pattern check is informational, mismatches expected

**Sample Output (PASS with mismatches):**
```
Status: PASS  # Always PASS when waivers.value=0
Reason: All mismatches waived as informational
INFO01 ([WAIVED_INFO]):
  - "Explanation: Block name pattern check is informational only"
INFO02 ([WAIVED_AS_INFO]):
  - Block name pattern missing: cdn_hs_phy_data_slice [WAIVED_AS_INFO]
```

---

## Type 3: Value Check with Waiver Logic

**Configuration (copy to item_data.yaml for testing):**
```yaml
IMP-7-0-0-00:
  description: "Block name (e.g: cdn_hs_phy_data_slice)"
  requirements:
    value: 1
    pattern_items:
      - "cdn_hs_phy_data_slice"
  input_files:
    - "${CHECKLIST_ROOT}/IP_project_folder/reports/7.0/IMP-7-0-0-00.rpt"
  waivers:
    value: 1
    waive_items:
      - name: "CDN_104H_cdn_hs_phy_data_slice_EW"  # Object NAME to exempt, NOT pattern value
        reason: "Waived - Legacy block naming convention approved"
```

üõë CRITICAL RULE for pattern_items AND waive_items.name:
- BOTH must be at SAME semantic level as description!
- pattern_items = VALUES to match (versions, status, conditions)
- waive_items.name = OBJECT NAMES to exempt (libraries, modules, views, files)

**Check Behavior:**
Type 3 = Type 2 + waiver support.
Same pattern search logic as Type 2, plus waiver classification:
- Match found_items against waive_items
- Unwaived items ‚Üí ERROR (need fix)
- Waived items ‚Üí INFO with [WAIVER] tag (approved)
- Unused waivers ‚Üí WARN with [WAIVER] tag
PASS if all found_items (violations) are waived.

**Sample Output (with waived items):**
```
Status: PASS
Reason: All violations waived
INFO01 (Waived):
  - Block name pattern missing: cdn_hs_phy_data_slice [WAIVER]
WARN01 (Unused Waivers):
  - CDN_104H_cdn_hs_phy_data_slice_EW
```

**Sample Output (unwaived violations):**
```
Status: FAIL
Reason: Expected block name pattern not satisfied or missing from report
ERROR01:
  - Block name pattern missing: cdn_hs_phy_data_slice
```

---

## Type 4: Boolean Check with Waiver Logic

**Configuration (copy to item_data.yaml for testing):**
```yaml
IMP-7-0-0-00:
  description: "Block name (e.g: cdn_hs_phy_data_slice)"
  requirements:
    value: N/A
    pattern_items: []
  input_files:
    - "${CHECKLIST_ROOT}/IP_project_folder/reports/7.0/IMP-7-0-0-00.rpt"
  waivers:
    value: 1
    waive_items:
      - name: "CDN_104H_cdn_hs_phy_data_slice_EW"
        reason: "Waived - Non-standard block name approved by design team"
```

**Check Behavior:**
Type 4 = Type 1 + waiver support.
Custom boolean validation with waiver classification.

**Sample Output (with waived items):**
```
Status: PASS
Reason: All violations waived
INFO01 (Waived):
  - Block name pattern missing: cdn_hs_phy_data_slice [WAIVER]
WARN01 (Unused Waivers):
  - CDN_104H_cdn_hs_phy_data_slice_EW
```

**Sample Output (unwaived violations):**
```
Status: FAIL
Reason: Block name entry not found or invalid in implementation report
ERROR01:
  - Block name pattern missing: cdn_hs_phy_data_slice
```